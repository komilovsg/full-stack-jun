# Тестовое задание для Junior Full-Stack разработчика

## О компании

Мы - стартап в сфере недвижимости с широкой технической архитектурой: несколько веб-приложений, микросервисы, парсеры данных, Telegram боты, интеграции с CRM и внешними API, аналитические базы данных

**Наш стек:** Node.js/TypeScript, PostgreSQL, CRDB, Redis, Docker, Kubernetes, Next + React, node-telegram-bot-api и Telegraf, Puppeteer, BigQuery и десятки интеграций

---

## Философия отбора

Мы ищем разработчика, который:

- **Быстро адаптируется** к незнакомым системам и технологиям
- **Активно использует AI-инструменты** (Claude Code, Cursor) для ускорения работы, ресерча и обучения
- **Умеет доводить до работающего результата**

> Если это задание кажется слишком объёмным - вероятно, наш темп работы вам не подойдёт

> Если вы понимаете, что с AI-инструментами это реально за несколько часов - добро пожаловать

Несколько часов - это не "сгенерировал и отправил". Это написать код с помощью AI, проверить, поправить косяки, довести до рабочего состояния. Агент ускоряет, но не делает всё за вас

**Важно:** реальные рабочие задачи обычно меньше по объёму, но не проще. В повседневной работе добавляются отладка, код-ревью, уточнение требований, рефакторинг, изменения в ТЗ и интеграция в живой проект. Здесь же у вас полная свобода действий и чистый лист - это проще и быстрее. Мы не ожидаем, что рабочие задачи будут выполняться с такой же скоростью.
---

## Задание: Telegram-бот для аналитики группового чата

Создайте Telegram-бота, который собирает статистику сообщений в групповом чате и предоставляет аналитику с использованием API LLM, а также небольшой дублирующий веб-интерфейс

---

## Блок 1: Инфраструктура

**Требования:**

- Docker Compose с четырьмя сервисами:
  - `postgres` — PostgreSQL 13+
  - `redis` — Redis для кэширования
  - `bot` — Node.js приложение с ботом
  - `web` — Next.js веб-интерфейс

**Результат:**
```bash
docker-compose up --build
# Бот запускается и готов к работе (с моим токеном)
```

---

## Блок 2: Сбор данных

- Бот добавляется в групповой чат
- При получении любого текстового сообщения в группе бот сохраняет его в БД
- Бот хранит всех юзеров, кто пишет сообщения в этом чате

Для каждой таблицы должна быть своя модель (класс или модуль) в папке `models/`. Модель инкапсулирует SQL-запросы и предоставляет методы для работы с данными

---

## Блок 3: Статистика

**Интерфейс:** inline-кнопки (inline keyboard). Команда `/stats` открывает меню с кнопками для навигации

**Функционал:**
- Общая статистика: "топ-10 пользователей по сообщениям"
- Статистика конкретного пользователя (выбор из списка или по @username)
- Временной фильтр (за сегодня / за неделю / за месяц / за всё время или более гибко по датам)

**Кэширование:**
Результаты статистики кэшируются в Redis. Время жизни кэша - настраиваемое через конфиг (по умолчанию 20 минут).

**Пример вывода:**
```
Статистика чата за все время:

1. @john_doe - 156 сообщений
2. @jane_smith - 134 сообщения
3. Ivan Petrov - 98 сообщений
...

Всего: 1,247 сообщений от 23 пользователей

[За сегодня] [За неделю] [За месяц]
```

---

## Блок 4: LLM-интеграция (Gemini API)

**Требования:**
- Использовать бесплатный Gemini API (Google AI Studio)

**Команда:** `/analyze @username` или `/analyze` (reply на сообщение)

**Логика:**
1. Получить последние 50-100 сообщений пользователя
2. Отправить в Gemini с промптом для анализа
3. Вернуть структурированный результат
4. Не стремитесь улучшать промт до идеала, мы не ждем что это будет реальный продукт или полноценный анализ юзера

**Что анализировать** (примеры на выбор, можно свое):
- Стиль общения (формальный/неформальный)
- Основные темы, которые поднимает пользователь
- Средняя длина сообщений
- Активность по времени суток
- Тональность (позитивная/нейтральная/негативная)
- Частые слова или выражения

**Пример вывода:**
```
Анализ пользователя @john_doe

Стиль: Неформальный, дружелюбный
Темы: Технологии, путешествия, еда
Активность: Пик в 10:00-12:00 и 18:00-20:00
Тональность: Преимущественно позитивная
Особенности: Часто использует эмодзи, задает много вопросов

На основе 87 сообщений за последние 30 дней.
```

---

## Блок 5: Веб-интерфейс (Next.js)

Простая веб-страница для анализа пользователя — то же самое что `/analyze` в боте, но через браузер.

**Требования:**
- Next.js приложение
- Одна страница: поле ввода username + кнопка "Анализировать"
- Результат анализа выводится на этой же странице
- Запуск: `npm run dev` (или аналогичная команда)

**Допускается** копирование кода моделей/сервисов между ботом и веб-приложением.

---

## Блок 6: Своя фича

Придумайте и реализуйте **одну дополнительную функцию** бота.

**Зачем этот пункт:**
В реальной работе бывают моменты, когда задача не расписана до мелочей - есть данные, есть контекст, и разработчик может предложить что-то полезное. Это не про гениальность, а про умение увидеть возможность и реализовать её. Иногда у вас будет пространство для инициативы - мы хотим понять, как вы им воспользуетесь

**Что мы оцениваем:**
- Логичность идеи - понятно ли, зачем это нужно
- Реализация - работает ли это
- Объяснение - как вы описали фичу в README
- мы НЕ ОЦЕНИВАЕМ оригинальность, усложненность, масштаб идеи

**В README опишите:**
- Что делает фича
- Зачем она нужна (какую проблему решает)
- Как использовать

---

## Блок 7: Тесты

Напишите несколько unit-тестов с использованием Vitest

**Требования:**
- Команда `npm test` запускает тесты
- Минимум 2-5 тестов

Тесты должны работать без поднятия реальной архитектуры (мокайте зависимости)

---

## Блок 8: Документация

**Примерный README.md:**

### 1. Запуск проекта
```bash
# Как склонировать, настроить .env, запустить
```

### 2. Архитектура
- Краткое описание структуры проекта
- Какие технологии использованы и почему

### 3. Принятые решения
- Какие архитектурные решения приняли и почему
- С какими сложностями столкнулись и как решили

### 4. Использование AI (обязательный раздел)
- Какие AI-инструменты использовали
- Для каких задач AI помог больше всего
- Где пришлось доработать сгенерированный код
- Примерная оценка: сколько времени сэкономил AI

---

## Технические требования

### Обязательно:
- **Node.js** + **TypeScript**
- **Telegraf/node-telegram-api**
- **Next.js** (для веб-интерфейса)
- **PostgreSQL** (без ORM, чистые SQL запросы или легкий query builder)
- **Redis** (для кэширования)
- **Docker Compose**
- **Типизация**
---

## На что мы смотрим

**Главное - работает ли проект.** Запускаем `docker-compose up`, добавляем бота в чат, проверяем команды. Запускаем `npm run dev` для веб-интерфейса, проверяем анализ пользователя.

**Дальше смотрим на:**
- **Полноту** - выполнены ли все блоки задания
- **Код** - читаемость, структура папок, типизация, отсутствие хардкода
- **README** - особенно раздел про использование AI: что использовали, как помогло, где доработали

**Своя фича** - бонус. Не решающий фактор.

**Если что-то не получилось** - всё равно присылайте. Опишите в README, с чем столкнулись и что помешало. Умение честно рассказать о проблемах и показать ход мыслей - тоже важный навык.

---

## Как сдать

Ссылка на GitHub-репозиторий.